import pygame
import os-
pygame.init()
SCREEN_WIDTH = 800
SCREEN_HEIGHT = 600
screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
pygame.display.set_caption("Mario-like Map")

# --- Kích thước Tile ---
# Kích thước pixel của mỗi ô vuông trong map (ví dụ 16x16, 32x32)
TILE_SIZE = 32

# --- Tải Hình ảnh (Sprites) ---
def load_sprite(filename, size=TILE_SIZE):
    """Tải và điều chỉnh kích thước hình ảnh."""
    path = filename # Giả định các tệp nằm cùng thư mục
    try:
        image = pygame.image.load(path).convert_alpha()
        # Điều chỉnh kích thước hình ảnh cho phù hợp với TILE_SIZE
        return pygame.transform.scale(image, (size, size))
    except pygame.error as e:
        print(f"Không thể tải hình ảnh {path}: {e}")
        return pygame.Surface((size, size)) # Trả về bề mặt trống nếu lỗi

# Tải các hình ảnh đã cung cấp
sprites = {
    'dat': load_sprite('đất.png', size=TILE_SIZE),
    'cot_xanh': load_sprite('cột_xanh.png', size=TILE_SIZE * 3), # Cột có thể cao hơn
    'may_co': load_sprite('mây_cỏ.png', size=TILE_SIZE),
    'hoa': load_sprite('hoa.png', size=TILE_SIZE),
    'goombas': load_sprite('goombas_1.png', size=TILE_SIZE),
    # Thêm các hình khác nếu cần
}

# --- Định nghĩa Map ---
# Map được biểu diễn bằng một ma trận 2D
# Mỗi ký tự đại diện cho một loại tile
# W: Đất/Gạch (Wall/Brick)
# P: Cột Xanh (Pipe)
# G: Cỏ/Mây (Ground/Cloud - dùng cho nền)
# H: Hoa (Flower)
# E: Kẻ thù Goombas (Enemy)
# . : Khoảng trống (Empty)

level_map = [
    "................................",
    "................................",
    "................G...............",
    "................................",
    "...............W.W..............",
    "...........W....................",
    "................................",
    "..........P.....................",
    "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW",
]
MAP_ROWS = len(level_map)
MAP_COLS = len(level_map[0])

# --- Chức năng Vẽ Map ---
def draw_map():
    for row_index, row in enumerate(level_map):
        for col_index, tile in enumerate(row):
            x = col_index * TILE_SIZE
            y = row_index * TILE_SIZE

            if tile == 'W': # Đất/Gạch
                screen.blit(sprites['dat'], (x, y))
            elif tile == 'P': # Cột Xanh
                # Cột có thể cần xử lý chiều cao đặc biệt nếu sprite cột_xanh_dai
                # Ở đây ta giả định 'cột_xanh' là một tile 32x96 (3 ô cao)
                screen.blit(sprites['cot_xanh'], (x, y - TILE_SIZE*2))
            elif tile == 'G': # Cỏ/Mây (Giả sử chỉ là Mây)
                screen.blit(sprites['may_co'], (x, y))
            elif tile == 'H': # Hoa
                screen.blit(sprites['hoa'], (x, y))
            elif tile == 'E': # Kẻ thù Goombas
                screen.blit(sprites['goombas'], (x, y))
            # ... Thêm các loại tile khác tại đây

# --- Vòng lặp Game Chính ---
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        # Bạn sẽ thêm xử lý di chuyển của nhân vật Mario tại đây

    # Cập nhật Game (Ví dụ: di chuyển kẻ thù, xử lý va chạm)
    # ...

    # Vẽ
    screen.fill((92, 148, 252)) # Màu nền bầu trời xanh của Mario
    draw_map()

    # Cập nhật màn hình
    pygame.display.flip()

pygame.quit()